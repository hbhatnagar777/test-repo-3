<?xml version="1.0" encoding="UTF-8"?>
<Workflow_WorkflowDefinition apiMode="0" config="&lt;configuration />"
    description="&lt;html>&lt;p>&#xa;      Workflow to validate the GetCredential activity&#xa;    &lt;/p>&lt;/html>"
    executeOnWeb="0"
    inputs="&lt;inputs>&lt;INP_EMAIL_ID class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>&lt;/INP_EMAIL_ID>&lt;INP_FAILURE_VALIDATION class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>false&lt;/INP_FAILURE_VALIDATION>&lt;INP_CLIENT class=&quot;commvault.msgs.CvEntities.ClientEntity&quot; _list_=&quot;false&quot;>&lt;clientName>&lt;/clientName>&lt;clientId />&lt;displayName>&lt;/displayName>&lt;/INP_CLIENT>&lt;INP_CREDENTIAL class=&quot;commvault.msgs.CvEntities.CredentialEntity&quot; _list_=&quot;false&quot;>&lt;credentialName>&lt;/credentialName>&lt;credentialId />&lt;/INP_CREDENTIAL>&lt;INP_IS_WINDOWS class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>true&lt;/INP_IS_WINDOWS>&lt;INP_DEFAULT_VALIDATION class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>false&lt;/INP_DEFAULT_VALIDATION>&lt;INP_NOTAVAIL_VALIDATION class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>false&lt;/INP_NOTAVAIL_VALIDATION>&lt;INP_NOTAVAIL_CREDENTIAL class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>&lt;/INP_NOTAVAIL_CREDENTIAL>&lt;/inputs>"
    interactive="0" isHtmlDescription="1" manualPercentageComplete="0"
    name="WF_CREDENTIAL_MANAGER" outputs="&lt;outputs />"
    revision="$Revision: 1.2 $" tags=""
    uniqueGuid="be6ec199-9cbc-40eb-a507-873e9a069f14"
    variables="&lt;variables>&lt;VAR_WF_FAILIURE_MESSAGE class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;VAR_WF_STATUS class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;Exception class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot; />&lt;/variables>"
    webHidden="0" workflowId="0">
    <schema>
        <outputs className="" name="outputs" type=""/>
        <variables attribute="0" className="" name="variables" type="">
            <children attribute="0" className="java.lang.String"
                controlType="0" defaultValue="" displayName=""
                hidden="0" inputType="java.lang.String" listType="0"
                name="VAR_WF_FAILIURE_MESSAGE" type="{http://www.w3.org/2001/XMLSchema}string"/>
            <children attribute="0" className="java.lang.String"
                controlType="0" defaultValue="" displayName=""
                hidden="0" inputType="java.lang.String" listType="0"
                name="VAR_WF_STATUS" type="{http://www.w3.org/2001/XMLSchema}string"/>
            <children attribute="0" className="java.lang.Boolean"
                controlType="5" defaultValue="" hidden="0"
                inputType="java.lang.Boolean" listType="0"
                name="Exception" type="{http://www.w3.org/2001/XMLSchema}boolean"/>
        </variables>
        <inputs attribute="0" className="" name="inputs" type="">
            <children attribute="0"
                className="commvault.msgs.CvEntities.ClientEntity"
                controlHidden="0" controlType="2" defaultValue=""
                displayName="Select Client:" documentation="" hidden="0"
                inputType="commvault.msgs.CvEntities.ClientEntity"
                listType="0" maximumValue="" minimumValue=""
                name="INP_CLIENT" readOnly="0" required="1"
                searchable="0" type="{commvault.msgs.CvEntities}ClientEntity">
                <children attribute="0" className="java.lang.String"
                    defaultValue="" inputType="java.lang.String"
                    listType="0" name="clientName" type="{http://www.w3.org/2001/XMLSchema}string"/>
                <children attribute="0" className="java.lang.String"
                    defaultValue="" inputType="java.lang.String"
                    listType="0" name="displayName" type="{http://www.w3.org/2001/XMLSchema}string"/>
                <children attribute="0" className="java.lang.Integer"
                    defaultValue="" inputType="java.lang.Integer"
                    listType="0" name="clientId" type="{http://www.w3.org/2001/XMLSchema}integer"/>
            </children>
            <children attribute="0"
                className="commvault.msgs.CvEntities.CredentialEntity"
                controlHidden="0" controlType="2" defaultValue=""
                displayName="Select Credential:" documentation=""
                hidden="0"
                inputType="commvault.msgs.CvEntities.CredentialEntity"
                listType="0" maximumValue="" minimumValue=""
                name="INP_CREDENTIAL" readOnly="0" required="1"
                searchable="0" type="{commvault.msgs.CvEntities}CredentialEntity">
                <children attribute="0" className="java.lang.String"
                    defaultValue="" inputType="java.lang.String"
                    listType="0" name="credentialName" type="{http://www.w3.org/2001/XMLSchema}string"/>
                <children attribute="0" className="java.lang.Integer"
                    defaultValue="" inputType="java.lang.Integer"
                    listType="0" name="credentialId" type="{http://www.w3.org/2001/XMLSchema}integer"/>
            </children>
            <children attribute="0" className="java.lang.String"
                controlHidden="0" controlType="0" defaultValue=""
                displayName="Provide EmailId to send status email"
                documentation="" hidden="0" inputType="java.lang.String"
                listType="0" maximumValue="" minimumValue=""
                name="INP_EMAIL_ID" readOnly="0" required="1"
                searchable="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
            <children attribute="0" className="java.lang.Boolean"
                controlHidden="0" controlType="5" defaultValue=""
                displayName="Windows Validation?" documentation=""
                hidden="0" inputType="java.lang.Boolean" listType="0"
                maximumValue="" minimumValue="" name="INP_IS_WINDOWS"
                readOnly="0" required="0" searchable="0" type="{http://www.w3.org/2001/XMLSchema}boolean"/>
            <children attribute="0" className="java.lang.Boolean"
                controlHidden="0" controlType="5" defaultValue=""
                displayName="Failure Validation?" documentation=""
                hidden="0" inputType="java.lang.Boolean" listType="0"
                maximumValue="" minimumValue=""
                name="INP_FAILURE_VALIDATION" readOnly="0" required="0"
                searchable="0" type="{http://www.w3.org/2001/XMLSchema}boolean"/>
            <children attribute="0" className="java.lang.Boolean"
                controlHidden="0" controlType="5" defaultValue=""
                displayName="Default Validation?" documentation=""
                hidden="0" inputType="java.lang.Boolean" listType="0"
                maximumValue="" minimumValue=""
                name="INP_DEFAULT_VALIDATION" readOnly="0" required="0"
                searchable="0" type="{http://www.w3.org/2001/XMLSchema}boolean"/>
            <children attribute="0" className="java.lang.Boolean"
                controlHidden="0" controlType="5" defaultValue=""
                displayName="Non-Existing Credential Validation?"
                documentation="" hidden="0"
                inputType="java.lang.Boolean" listType="0"
                maximumValue="" minimumValue=""
                name="INP_NOTAVAIL_VALIDATION" readOnly="0" required="0"
                searchable="0" type="{http://www.w3.org/2001/XMLSchema}boolean"/>
            <children attribute="0" className="java.lang.String"
                controlHidden="0" controlType="0" defaultValue=""
                displayName="Non-avail credential" documentation=""
                hidden="0" inputType="java.lang.String" listType="0"
                maximumValue="" minimumValue=""
                name="INP_NOTAVAIL_CREDENTIAL" readOnly="0" required="0"
                searchable="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
        </inputs>
        <config className="" name="configuration" type=""/>
    </schema>
    <Start commented="0" continueOnFailure="0" created="0"
        description="" displayName="Start" height="36" interactive="0"
        jobMode="0" name="Start" originalStyle="" skipAttempt="0"
        style="image;image=/images/jgraphx/house.png"
        uniqueName="Start_1" waitSetting="0" width="55" x="45" y="41">
        <inputs val="&lt;inputs />"/>
        <transition activity="GetCredentials_1" commented="0"
            originalStyle="" points="" sourceX="72" sourceY="59"
            status="0" style="defaultEdge;dashed=1" targetX="195"
            targetY="60" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/inputs/INP_NOTAVAIL_VALIDATION} &amp;&amp; !xpath:{/workflow/inputs/INP_DEFAULT_VALIDATION};"/>
        </transition>
        <transition activity="GetCredentials_2" commented="0"
            originalStyle="" sourceX="72" sourceY="59" status="0"
            style="defaultEdge;dashed=1" targetX="85" targetY="274"
            transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/inputs/INP_DEFAULT_VALIDATION} &amp;&amp; !xpath:{/workflow/inputs/INP_NOTAVAIL_VALIDATION};"/>
        </transition>
        <transition activity="GetCredentials_3" commented="0"
            originalStyle="" points="153.0,182.0" sourceX="72"
            sourceY="59" status="0" style="defaultEdge;dashed=1"
            targetX="253" targetY="294" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/inputs/INP_DEFAULT_VALIDATION} &amp;&amp; xpath:{/workflow/inputs/INP_NOTAVAIL_VALIDATION};"/>
        </transition>
    </Start>
    <Activity commented="0" continueOnFailure="0"
        created="1450373419650"
        description="creates a super process group"
        displayName="Validate" height="51" interactive="0" jobMode="0"
        name="ProcessBlock"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0" style="swimlane"
        uniqueName="ProcessBlock_5" waitSetting="0" width="254" x="287" y="331">
        <inputs val="&lt;inputs>&lt;inputs>&lt;pb_status class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;pb_failiure_message class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;/inputs>&lt;/inputs>"/>
        <superProcess>
            <Start commented="0" continueOnFailure="0"
                created="1450373419650" description=""
                displayName="Start" height="17" interactive="0"
                jobMode="0" name="Start" originalStyle=""
                skipAttempt="0"
                style="label;fillColor=#FFFF33;gradientColor=#FFFF00"
                uniqueName="Start_11" waitSetting="0" width="58" x="3" y="28">
                <inputs val="&lt;inputs />"/>
                <transition activity="Script_1" commented="0"
                    originalStyle="" points="" sourceX="78" sourceY="45"
                    status="0" style="defaultEdge" targetX="462"
                    targetY="42" transitionIndex="0" x="0" y="0">
                    <condition language="1" script="/*&#xa;The expression should return a boolean. Use the variable name &quot;activity&quot; to refer to the previous activity object. Example:&#xa;activity.exitCode==0;&#xa;*/&#xa;"/>
                </transition>
            </Start>
            <Activity commented="0" continueOnFailure="0"
                created="1450373427291"
                description="activity to execute code snippets in the selected language"
                displayName="Update Workflow Status " height="17"
                interactive="0" jobMode="0" name="Script"
                namespaceUri="commvault.cte.workflow.activities"
                originalStyle="" skipAttempt="0"
                style="label;image=Script" uniqueName="Script_1"
                waitSetting="0" width="171" x="76" y="27">
                <inputs val="&lt;inputs>&lt;script language=&quot;1&quot; script=&quot;logger.info(&amp;quot;INFO: pb_status : [&amp;quot; + xpath:{/workflow/ProcessBlock_5/pb_status} + &amp;quot;]&amp;quot;);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;if (!xpath:{/workflow/ProcessBlock_5/pb_status}.equals(&amp;quot;COMPLETED&amp;quot;))&amp;#xD;&amp;#xA;{&amp;#xD;&amp;#xA;    workflow.setVariable(&amp;quot;VAR_WF_STATUS&amp;quot;, &amp;quot;FAILED&amp;quot;);&amp;#xD;&amp;#xA;    workflow.setVariable(&amp;quot;VAR_WF_FAILIURE_MESSAGE&amp;quot;, xpath:{/workflow/ProcessBlock_5/pb_failiure_message});&amp;#xD;&amp;#xA;    logger.info(&amp;quot;INFO: Setting VAR_WF_STATUS = [&amp;quot; + workflow.getVariable(&amp;quot;VAR_WF_STATUS&amp;quot;) + &amp;quot;]&amp;quot;);&amp;#xD;&amp;#xA;    logger.info(&amp;quot;INFO: Setting VAR_WF_FAILIURE_MESSAGE = [&amp;quot; + workflow.getVariable(&amp;quot;VAR_WF_FAILIURE_MESSAGE&amp;quot;) + &amp;quot;]&amp;quot;);&amp;#xD;&amp;#xA;}&quot; />&lt;/inputs>"/>
            </Activity>
        </superProcess>
        <activitySchema>
            <outputs attribute="0" className="" defaultValue=""
                listType="0" name="outputs" required="1" type="">
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_status" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_failiure_message" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
            </outputs>
            <inputs attribute="0" className="" defaultValue=""
                listType="0" name="inputs" required="1" type="">
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_status" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_failiure_message" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
            </inputs>
        </activitySchema>
    </Activity>
    <Activity commented="0" continueOnFailure="0"
        created="1449248148429"
        description="executes a set of activities when the workflow completes"
        displayName="OnWorkflowComplete" height="55" interactive="0"
        jobMode="0" name="OnWorkflowComplete"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0" style="swimlane"
        uniqueName="OnWorkflowComplete_1" waitSetting="0" width="236"
        x="28" y="331">
        <inputs val="&lt;inputs>&lt;inputs />&lt;/inputs>"/>
        <superProcess>
            <Start commented="0" continueOnFailure="0"
                created="1449248148429" description=""
                displayName="Start" height="19" interactive="0"
                jobMode="0" name="Start" originalStyle=""
                skipAttempt="0"
                style="label;fillColor=#FFFF33;gradientColor=#FFFF00"
                uniqueName="Start_3" waitSetting="0" width="58" x="4" y="28">
                <inputs val="&lt;inputs />"/>
                <transition activity="WF_EMAIL_1" commented="0"
                    originalStyle="" points="" sourceX="33" sourceY="37"
                    status="0" style="defaultEdge" targetX="92"
                    targetY="40" transitionIndex="0" x="0" y="0">
                    <condition language="1" script="/*&#xa;The expression should return a boolean. Use the variable name &quot;activity&quot; to refer to the previous activity object. Example:&#xa;activity.exitCode==0;&#xa;*/&#xa;"/>
                </transition>
            </Start>
            <Activity commented="0" continueOnFailure="0"
                created="1450366181754" description="Ends the workflow"
                displayName="End" height="24" interactive="0"
                jobMode="0" name="WorkflowEnd"
                namespaceUri="commvault.cte.workflow.activities"
                originalStyle="" skipAttempt="0"
                style="label;image=WorkflowEnd"
                uniqueName="WorkflowEnd_4" waitSetting="0" width="58"
                x="172" y="26">
                <inputs val="&lt;inputs>&lt;completionStatus class=&quot;workflow.types.WorkflowCompletionStatus&quot; _list_=&quot;false&quot;>xpath:{/workflow/variables/VAR_WF_STATUS}&lt;/completionStatus>&lt;failureMessage class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/variables/VAR_WF_FAILIURE_MESSAGE}&lt;/failureMessage>&lt;/inputs>"/>
            </Activity>
            <Activity commented="0" continueOnFailure="0"
                created="1456503510459" description=""
                displayName="WF_EMAIL" height="20" interactive="0"
                jobMode="0" name="WF_EMAIL"
                namespaceUri="commvault.workflow.activities"
                originalStyle="" skipAttempt="0"
                style="label;image=WF_EMAIL" uniqueName="WF_EMAIL_1"
                waitSetting="0" width="90" x="71" y="27">
                <inputs val="&lt;inputs>&lt;INP_EMAIL_ID class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_EMAIL_ID}&lt;/INP_EMAIL_ID>&lt;INP_STATUS class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/variables/VAR_WF_STATUS}&lt;/INP_STATUS>&lt;INP_JOBID class=&quot;java.lang.Integer&quot; _list_=&quot;false&quot;>xpath:{/workflow/system/jobId}&lt;/INP_JOBID>&lt;INP_WORKFLOW_NAME class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/system/workflow/workflowName}&lt;/INP_WORKFLOW_NAME>&lt;INP_START_TIME class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/system/startTime}&lt;/INP_START_TIME>&lt;INP_FAILIURE_MESSAGE class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/variables/VAR_WF_FAILIURE_MESSAGE}&lt;/INP_FAILIURE_MESSAGE>&lt;/inputs>"/>
                <transition activity="WorkflowEnd_4" commented="0"
                    originalStyle="" points="" sourceX="116"
                    sourceY="37" status="0" style="defaultEdge"
                    targetX="206" targetY="37" transitionIndex="0" x="0" y="0">
                    <condition language="1" script="/*&#xa;The expression should return a boolean. Use the variable name &quot;activity&quot; to refer to the previous activity object. Example:&#xa;activity.exitCode==0;&#xa;*/&#xa;"/>
                </transition>
            </Activity>
        </superProcess>
        <activitySchema>
            <outputs attribute="0" className="" defaultValue=""
                listType="0" name="outputs" required="1" type=""/>
            <inputs attribute="0" className="" defaultValue=""
                listType="0" name="inputs" required="1" type=""/>
        </activitySchema>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1574762883274"
        description="Execute a command on a remote machine"
        displayName="PSExec" height="20" interactive="0" jobMode="0"
        maxRestarts="0" name="PSExec"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.PSExecActivity"
        uniqueName="PSExec_1" waitSetting="0" width="100" x="775" y="48">
        <onExit language="1" script="workflow.setVariable(&quot;Exception&quot;,true);&#xd;&#xa;logger.info(&quot;[PSExec] ipconfig Command response : &quot;+xpath:{/workflow/PSExec_1/commandOutput});&#xd;&#xa;&#xd;&#xa;if(!xpath:{/workflow/inputs/INP_FAILURE_VALIDATION})&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/PSExec_1/exitCode}==0 &amp;&amp; xpath:{/workflow/PSExec_1/errorCode}==0 &amp;&amp; xpath:{/workflow/PSExec_1/commandOutput}.contains(&quot;IPv4 Address&quot;))  //On successful execution of PSExec command&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;      {&#xd;&#xa;          String temp = &quot;Failure case validation using GetCredentials output on Windows PSExec activity fails with response as [ &quot; + xpath:{/workflow/PSExec_1/commandOutput} + &quot; ]&quot;;&#xd;&#xa;          workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, temp);&#xd;&#xa;      }&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/PSExec_1/exitCode}!=0 || xpath:{/workflow/PSExec_1/errorCode}!=0 || !xpath:{/workflow/PSExec_1/commandOutput}.contains(&quot;IPv4 Address&quot;))  //for failure validation, wrong credential is being passed, the execution of PSExec command using credential need to fail&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;,&quot;failure case validation using GetCredentials in Windows PSExec activity fails&quot;);&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;logger.info(&quot;INFO : Exception  : &quot;+workflow.getVariable(&quot;Exception&quot;));"/>
        <inputs val="&lt;inputs>&lt;hostName class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_CLIENT}&lt;/hostName>&lt;userName class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/userName}&lt;/userName>&lt;password class=&quot;workflow.types.EncryptedString&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/password}&lt;/password>&lt;useImpersonation class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>false&lt;/useImpersonation>&lt;program class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>ipconfig&lt;/program>&lt;arguments class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;/inputs>"/>
        <transition activity="ExecuteProcessBlock_12" commented="0"
            originalStyle="" points="731.0,125.0" sourceX="780"
            sourceY="57" status="0" style="defaultEdge;dashed=1"
            targetX="608" targetY="153" transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/variables/Exception};"/>
        </transition>
        <transition activity="ExecuteProcessBlock_13" commented="0"
            originalStyle="" points="813.0,145.0" sourceX="825"
            sourceY="58" status="0" style="defaultEdge;dashed=1"
            targetX="647" targetY="212" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/variables/Exception};"/>
        </transition>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1571725961946"
        description="Execute a script on a remote machine"
        displayName="ExecuteScript" height="22" interactive="0"
        jobMode="0" maxRestarts="0" name="ExecuteScript"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.ExecuteScript"
        uniqueName="ExecuteScript_1" waitSetting="0" width="110" x="361" y="47">
        <onExit language="1" script="workflow.setVariable(&quot;Exception&quot;,true);&#xd;&#xa;logger.info(&quot;[ExecuteScript] OS Info Powershell Command response : &quot;+xpath:{/workflow/ExecuteScript_1/commandOutput});&#xd;&#xa;&#xd;&#xa;if(!xpath:{/workflow/inputs/INP_FAILURE_VALIDATION})&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteScript_1/exitCode}==0 &amp;&amp; xpath:{/workflow/ExecuteScript_1/errorCode}==0 &amp;&amp; xpath:{/workflow/ExecuteScript_1/commandOutput}.contains(&quot;OS Name:&quot;))  //On successful execution of powershell script&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;    String temp = &quot;Failure case validation using GetCredentials output on Windows ExecuteScript activity fails with response as [ &quot; + xpath:{/workflow/ExecuteScript_1/commandOutput} + &quot; ]&quot;;&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, temp);&#xd;&#xa;}&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteScript_1/exitCode}!=0 || xpath:{/workflow/ExecuteScript_1/errorCode}!=0 ||  !xpath:{/workflow/ExecuteScript_1/commandOutput}.contains(&quot;OS Name:&quot;))    //On failure validation, wrong credential passed, in this case the command execution need to be fail&#xd;&#xa;    workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, &quot;failure case validation using GetCredentials in Windows ExecuteScript activity fails&quot;);&#xd;&#xa;}&#xd;&#xa;logger.info(&quot;INFO : Exception  : &quot;+workflow.getVariable(&quot;Exception&quot;));"/>
        <inputs val="&lt;inputs>&lt;client class=&quot;commvault.msgs.CvEntities.ClientEntity&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_CLIENT}&lt;/client>&lt;impersonateUserName class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/userName}&lt;/impersonateUserName>&lt;impersonateUserPassword class=&quot;workflow.types.EncryptedString&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/password}&lt;/impersonateUserPassword>&lt;startUpPath class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;scriptType class=&quot;commvault.msgs.App.ScriptType&quot; _list_=&quot;false&quot;>PowerShell&lt;/scriptType>&lt;script class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>systeminfo | findstr /B /C:&quot;OS Name&quot; /C:&quot;OS Version&quot;&lt;/script>&lt;arguments class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;waitForProcessCompletion class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>true&lt;/waitForProcessCompletion>&lt;/inputs>"/>
        <transition activity="ExecuteCommand_1" commented="0"
            originalStyle="" points="" sourceX="416" sourceY="58"
            status="0" style="defaultEdge;dashed=1" targetX="553"
            targetY="58" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/variables/Exception};"/>
        </transition>
        <transition activity="ExecuteProcessBlock_12" commented="0"
            originalStyle="" points="495.0,129.0" sourceX="416"
            sourceY="58" status="0" style="defaultEdge;dashed=1"
            targetX="450" targetY="121" transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/variables/Exception};"/>
        </transition>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1574946025281"
        description="retrieves the username and password for a credential"
        displayName="GetCredentials" height="24" interactive="0"
        jobMode="0" maxRestarts="0" name="GetCredentials"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.GetCredentialsActivity"
        uniqueName="GetCredentials_1" waitSetting="0" width="114"
        x="172" y="46">
        <onExit language="1" script="logger.info(&quot;Is Windows Validation ? &quot;+xpath:{/workflow/inputs/INP_IS_WINDOWS});&#xd;&#xa;logger.info(&quot;Is this failure Validation ? &quot;+xpath:{/workflow/inputs/INP_FAILURE_VALIDATION});"/>
        <inputs val="&lt;inputs>&lt;credential class=&quot;commvault.msgs.CvEntities.CredentialEntity&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_CREDENTIAL}&lt;/credential>&lt;/inputs>"/>
        <transition activity="ExecuteScript_1" commented="0"
            displayName="Windows" originalStyle="" points=""
            sourceX="229" sourceY="58" status="0"
            style="defaultEdge;dashed=1" targetX="535" targetY="64"
            transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/inputs/INP_IS_WINDOWS};"/>
        </transition>
        <transition activity="ExecuteScript_2" commented="0"
            displayName="Unix" originalStyle="" points="" sourceX="229"
            sourceY="58" status="0" style="defaultEdge;dashed=1"
            targetX="260" targetY="166" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/inputs/INP_IS_WINDOWS};"/>
        </transition>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1575006852871"
        description="Execute a command on a remote machine"
        displayName="ExecuteCommand" height="23" interactive="0"
        jobMode="0" maxRestarts="0" name="ExecuteCommand"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.ExecuteCommand"
        uniqueName="ExecuteCommand_1" waitSetting="0" width="134"
        x="536" y="47">
        <onExit language="1" script="workflow.setVariable(&quot;Exception&quot;,true);&#xd;&#xa;logger.info(&quot;[ExecuteCommand] ipconfig Command response : &quot;+xpath:{/workflow/ExecuteCommand_1/commandOutput});&#xd;&#xa;&#xd;&#xa;if(!xpath:{/workflow/inputs/INP_FAILURE_VALIDATION})&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteCommand_1/exitCode}==0 &amp;&amp; xpath:{/workflow/ExecuteCommand_1/errorCode}==0 &amp;&amp; xpath:{/workflow/ExecuteCommand_1/commandOutput}.contains(&quot;IPv4 Address&quot;))  //On successful execution of command&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;   {&#xd;&#xa;       String temp = &quot;Failure case validation using GetCredentials output on Windows ExecuteCommand activity fails with response as [ &quot; + xpath:{/workflow/ExecuteCommand_1/commandOutput} + &quot; ]&quot;;&#xd;&#xa;       workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, temp);&#xd;&#xa;   }&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteCommand_1/exitCode}!=0 || xpath:{/workflow/ExecuteCommand_1/errorCode}!=0 || !xpath:{/workflow/ExecuteCommand_1/commandOutput}.contains(&quot;IPv4 Address&quot;))  //for failure validation, wrong credential is being passed, the execution of command using credential need to fail&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;,&quot;failure case validation using GetCredentials in Windows ExecuteCommand activity fails&quot;);&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;logger.info(&quot;INFO : Exception  : &quot;+workflow.getVariable(&quot;Exception&quot;));"/>
        <inputs val="&lt;inputs>&lt;client class=&quot;commvault.msgs.CvEntities.ClientEntity&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_CLIENT}&lt;/client>&lt;impersonateUserName class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/userName}&lt;/impersonateUserName>&lt;impersonateUserPassword class=&quot;workflow.types.EncryptedString&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/password}&lt;/impersonateUserPassword>&lt;startUpPath class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;command class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>ipconfig&lt;/command>&lt;arguments class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;waitForProcessCompletion class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>true&lt;/waitForProcessCompletion>&lt;/inputs>"/>
        <transition activity="PSExec_1" commented="0" originalStyle=""
            points="" sourceX="603" sourceY="58" status="0"
            style="defaultEdge;dashed=1" targetX="736" targetY="55"
            transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/variables/Exception};"/>
        </transition>
        <transition activity="ExecuteProcessBlock_12" commented="0"
            originalStyle="" points="" sourceX="603" sourceY="58"
            status="0" style="defaultEdge;dashed=1" targetX="603"
            targetY="151" transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/variables/Exception};"/>
        </transition>
    </Activity>
    <Activity commented="0" continueOnFailure="0"
        created="1453994923517"
        description="executes a defined process block within the workflow"
        displayName="Failed" height="22" interactive="0" jobMode="0"
        name="ExecuteProcessBlock"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=ExecuteProcessBlock"
        uniqueName="ExecuteProcessBlock_12" waitSetting="0" width="87"
        x="561" y="148">
        <inputs val="&lt;inputs>&lt;inputs>&lt;pb_status class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>FAILED&lt;/pb_status>&lt;pb_failiure_message class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/variables/VAR_WF_FAILIURE_MESSAGE}&lt;/pb_failiure_message>&lt;/inputs>&lt;processBlock>ProcessBlock_5&lt;/processBlock>&lt;outputs />&lt;/inputs>"/>
        <activitySchema>
            <outputs name="ProcessBlock_5">
                <children name="Start_11"/>
                <children name="Script_1">
                    <children className="java.lang.Object"
                        inputType="java.lang.Object" name="output" type="{http://www.w3.org/2001/XMLSchema}anyType"/>
                </children>
            </outputs>
            <inputs attribute="0" className="" defaultValue=""
                listType="0" name="inputs" required="1" type="">
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_status" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_failiure_message" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
            </inputs>
        </activitySchema>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1575011890987"
        description="Execute a script on a remote machine"
        displayName="ExecuteScript" height="22" interactive="0"
        jobMode="0" maxRestarts="0" name="ExecuteScript"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.ExecuteScript"
        uniqueName="ExecuteScript_2" waitSetting="0" width="110" x="173" y="117">
        <onExit language="1" script="workflow.setVariable(&quot;Exception&quot;,true);&#xd;&#xa;logger.info(&quot;[ExecuteScript] UnixShell Commvault Registry properties Command response : &quot;+xpath:{/workflow/ExecuteScript_2/commandOutput});&#xd;&#xa;&#xd;&#xa;if(!xpath:{/workflow/inputs/INP_FAILURE_VALIDATION})&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteScript_2/exitCode}==0 &amp;&amp; xpath:{/workflow/ExecuteScript_2/errorCode}==0 &amp;&amp; xpath:{/workflow/ExecuteScript_2/commandOutput}.contains(&quot;dBASEHOME&quot;))  //On successful execution of powershell script&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;    String temp = &quot;Failure case validation using GetCredentials output on Unix ExecuteScript activity fails with response as [ &quot; + xpath:{/workflow/ExecuteScript_2/commandOutput} + &quot; ]&quot;;&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, temp);&#xd;&#xa;}&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteScript_2/exitCode}!=0 || xpath:{/workflow/ExecuteScript_2/errorCode}!=0 ||  !xpath:{/workflow/ExecuteScript_2/commandOutput}.contains(&quot;dBASEHOME&quot;))    //On failure validation, wrong credential passed, in this case the command execution need to be fail&#xd;&#xa;    workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, &quot;failure case validation using GetCredentials in Unix ExecuteScript activity fails&quot;);&#xd;&#xa;}&#xd;&#xa;logger.info(&quot;INFO : Exception  : &quot;+workflow.getVariable(&quot;Exception&quot;));"/>
        <inputs val="&lt;inputs>&lt;client class=&quot;commvault.msgs.CvEntities.ClientEntity&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_CLIENT}&lt;/client>&lt;impersonateUserName class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/userName}&lt;/impersonateUserName>&lt;impersonateUserPassword class=&quot;workflow.types.EncryptedString&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/password}&lt;/impersonateUserPassword>&lt;startUpPath class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;scriptType class=&quot;commvault.msgs.App.ScriptType&quot; _list_=&quot;false&quot;>UnixShell&lt;/scriptType>&lt;script class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>#!/bin/bash&amp;#xD;&#xd;&#xa;cd /etc/CommVaultRegistry/Galaxy/Instance001/Base&amp;#xD;&#xd;&#xa;cat .properties&lt;/script>&lt;arguments class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;waitForProcessCompletion class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>true&lt;/waitForProcessCompletion>&lt;/inputs>"/>
        <transition activity="ExecuteCommand_2" commented="0"
            originalStyle="" points="" sourceX="228" sourceY="128"
            status="0" style="defaultEdge;dashed=1" targetX="226"
            targetY="199" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/variables/Exception};"/>
        </transition>
        <transition activity="ExecuteProcessBlock_12" commented="0"
            originalStyle="" points="428.0,129.0" sourceX="228"
            sourceY="128" status="0" style="defaultEdge;dashed=1"
            targetX="587" targetY="161" transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/variables/Exception};"/>
        </transition>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1575012473086"
        description="Execute a command on a remote machine"
        displayName="ExecuteCommand" height="25" interactive="0"
        jobMode="0" maxRestarts="0" name="ExecuteCommand"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.ExecuteCommand"
        uniqueName="ExecuteCommand_2" waitSetting="0" width="134"
        x="159" y="187">
        <onExit language="1" script="workflow.setVariable(&quot;Exception&quot;,true);&#xd;&#xa;logger.info(&quot;[ExecuteCommand] Unix ifconfig Command response : &quot;+xpath:{/workflow/ExecuteCommand_2/commandOutput});&#xd;&#xa;&#xd;&#xa;if(!xpath:{/workflow/inputs/INP_FAILURE_VALIDATION})&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteCommand_2/exitCode}==0 &amp;&amp; xpath:{/workflow/ExecuteCommand_2/errorCode}==0 &amp;&amp; xpath:{/workflow/ExecuteCommand_2/commandOutput}.contains(&quot;inet&quot;))  //On successful execution of command&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;   {&#xd;&#xa;       String temp = &quot;Failure case validation using GetCredentials output on Unix ExecuteCommand activity fails with response as [ &quot; + xpath:{/workflow/ExecuteCommand_2/commandOutput} + &quot; ]&quot;;&#xd;&#xa;       workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, temp);&#xd;&#xa;   }&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;if(xpath:{/workflow/ExecuteCommand_2/exitCode}!=0 || xpath:{/workflow/ExecuteCommand_2/errorCode}!=0 || !xpath:{/workflow/ExecuteCommand_2/commandOutput}.contains(&quot;inet&quot;))  //for failure validation, wrong credential is being passed, the execution of command using credential need to fail&#xd;&#xa;   workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;else&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;,&quot;failure case validation using GetCredentials in Unix ExecuteCommand activity fails&quot;);&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;logger.info(&quot;INFO : Exception  : &quot;+workflow.getVariable(&quot;Exception&quot;));"/>
        <inputs val="&lt;inputs>&lt;client class=&quot;commvault.msgs.CvEntities.ClientEntity&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_CLIENT}&lt;/client>&lt;impersonateUserName class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/userName}&lt;/impersonateUserName>&lt;impersonateUserPassword class=&quot;workflow.types.EncryptedString&quot; _list_=&quot;false&quot;>xpath:{/workflow/GetCredentials_1/password}&lt;/impersonateUserPassword>&lt;startUpPath class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;command class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>ifconfig&lt;/command>&lt;arguments class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;waitForProcessCompletion class=&quot;java.lang.Boolean&quot; _list_=&quot;false&quot;>true&lt;/waitForProcessCompletion>&lt;/inputs>"/>
        <transition activity="ExecuteProcessBlock_12" commented="0"
            originalStyle="" points="429.0,179.0" sourceX="241"
            sourceY="204" status="0" style="defaultEdge;dashed=1"
            targetX="587" targetY="159" transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/variables/Exception};"/>
        </transition>
        <transition activity="ExecuteProcessBlock_13" commented="0"
            originalStyle="" points="463.0,207.0" sourceX="226"
            sourceY="199" status="0" style="defaultEdge;dashed=1"
            targetX="606" targetY="204" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/variables/Exception};"/>
        </transition>
    </Activity>
    <Activity commented="0" continueOnFailure="0"
        created="1575012730166"
        description="executes a defined process block within the workflow"
        displayName="Succces" height="22" interactive="0" jobMode="0"
        name="ExecuteProcessBlock"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=ExecuteProcessBlock"
        uniqueName="ExecuteProcessBlock_13" waitSetting="0" width="87"
        x="563" y="193">
        <inputs val="&lt;inputs>&lt;inputs>&lt;pb_status class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>COMPLETED&lt;/pb_status>&lt;pb_failiure_message class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;/inputs>&lt;processBlock>ProcessBlock_5&lt;/processBlock>&lt;outputs />&lt;/inputs>"/>
        <activitySchema>
            <outputs name="ProcessBlock_5">
                <children name="Start_11"/>
                <children name="Script_1">
                    <children className="java.lang.Object"
                        inputType="java.lang.Object" name="output" type="{http://www.w3.org/2001/XMLSchema}anyType"/>
                </children>
            </outputs>
            <inputs attribute="0" className="" defaultValue=""
                listType="0" name="inputs" required="1" type="">
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_status" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
                <children attribute="0" className="java.lang.String"
                    controlType="0" defaultValue="" displayName=""
                    documentation="" hidden="0"
                    inputType="java.lang.String" listType="0"
                    name="pb_failiure_message" readOnly="0" required="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
            </inputs>
        </activitySchema>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1576131564342"
        description="retrieves the username and password for a credential"
        displayName="Default Creds" height="27" interactive="0"
        jobMode="0" maxRestarts="0" name="GetCredentials"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.GetCredentialsActivity"
        uniqueName="GetCredentials_2" waitSetting="0" width="114" x="27" y="249">
        <onExit language="1" script="workflow.setVariable(&quot;Exception&quot;,true);&#xd;&#xa;if(xpath:{/workflow/GetCredentials_2/userName}!=&quot;&quot; &amp;&amp; xpath:{/workflow/GetCredentials_2/userName}!=null)&#xd;&#xa;{&#xd;&#xa;    workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;}&#xd;&#xa;&#xd;&#xa;if(workflow.getVariable(&quot;Exception&quot;))&#xd;&#xa;{&#xd;&#xa;    String temp = &quot;Execution of Default Credential in GetCredential activity failed&quot;;&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;, temp);&#xd;&#xa;}"/>
        <inputs val="&lt;inputs>&lt;credential class=&quot;commvault.msgs.CvEntities.CredentialEntity&quot; _list_=&quot;false&quot;>&lt;credentialName>WorkflowAutomation&lt;/credentialName>&lt;credentialId />&lt;/credential>&lt;/inputs>"/>
        <transition activity="ExecuteProcessBlock_13" commented="0"
            originalStyle="" points="502.0,314.0" sourceX="84"
            sourceY="262" status="0" style="defaultEdge;dashed=1"
            targetX="587" targetY="200" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/variables/Exception};"/>
        </transition>
        <transition activity="ExecuteProcessBlock_12" commented="0"
            originalStyle="" points="389.0,198.0" sourceX="84"
            sourceY="262" status="0" style="defaultEdge;dashed=1"
            targetX="581" targetY="148" transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/variables/Exception};"/>
        </transition>
    </Activity>
    <Activity commented="0" continueOnFailure="1"
        created="1576133053653"
        description="retrieves the username and password for a credential"
        displayName="Not Exists Cred" height="24" interactive="0"
        jobMode="0" maxRestarts="0" name="GetCredentials"
        namespaceUri="commvault.cte.workflow.activities"
        originalStyle="" skipAttempt="0"
        style="label;image=commvault.cte.workflow.activities.GetCredentialsActivity"
        uniqueName="GetCredentials_3" waitSetting="0" width="117"
        x="234" y="279">
        <onExit language="1" script="workflow.setVariable(&quot;Exception&quot;,true);&#xd;&#xa;if(xpath:{/workflow/GetCredentials_3/system/status}.equals(&quot;PENDING&quot;) &amp;&amp; xpath:{/workflow/GetCredentials_3/userName}==null &amp;&amp; xpath:{/workflow/GetCredentials_3/password}==null)&#xd;&#xa;{&#xd;&#xa;    workflow.setVariable(&quot;Exception&quot;,false);&#xd;&#xa;}&#xd;&#xa;else&#xd;&#xa;{&#xd;&#xa;    String temp = &quot;Expected GetCredential activity execution to be fail on processing non-existing credential&quot;;&#xd;&#xa;    workflow.setVariable(&quot;VAR_WF_FAILIURE_MESSAGE&quot;,temp);&#xd;&#xa;}"/>
        <inputs val="&lt;inputs>&lt;credential class=&quot;commvault.msgs.CvEntities.CredentialEntity&quot; _list_=&quot;false&quot;>xpath:{/workflow/inputs/INP_NOTAVAIL_CREDENTIAL}&lt;/credential>&lt;/inputs>"/>
        <transition activity="ExecuteProcessBlock_13" commented="0"
            originalStyle="" points="529.0,298.0" sourceX="292"
            sourceY="291" status="0" style="defaultEdge;dashed=1"
            targetX="580" targetY="213" transitionIndex="0" x="0" y="0">
            <condition language="1" script="!xpath:{/workflow/variables/Exception};"/>
        </transition>
        <transition activity="ExecuteProcessBlock_12" commented="0"
            originalStyle="" sourceX="292" sourceY="291" status="0"
            style="defaultEdge;dashed=1" targetX="575" targetY="153"
            transitionIndex="0" x="0" y="0">
            <condition language="1" script="xpath:{/workflow/variables/Exception};"/>
        </transition>
    </Activity>
    <formProperties css="" formVersion="0" javaScript="" pageMode="0">
        <rules/>
    </formProperties>
</Workflow_WorkflowDefinition>
