<?xml version="1.0" encoding="UTF-8"?>
<Workflow_WorkflowDefinition apiMode="1" businessLogic="1" businessLogicExecutedBy="cvd" businessLogicMessage="CVInstallManager_ClientSetup" businessLogicProcessing="Request" config="&lt;configuration>&lt;CustomString class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;/configuration>" description="BL Workflow to validate CVD module" executeOnWeb="0" inputs="&lt;inputs>&lt;requestXML class=&quot;workflow.types.XML&quot; _list_=&quot;false&quot;>&lt;/requestXML>&lt;processingInstruction class=&quot;workflow.types.XML&quot; _list_=&quot;false&quot;>&lt;/processingInstruction>&lt;responseXML class=&quot;workflow.types.XML&quot; _list_=&quot;false&quot;>&lt;/responseXML>&lt;/inputs>" interactive="0" isHtmlDescription="0" manualPercentageComplete="0" name="WF_CVDBL" outputs="&lt;outputs>&lt;returnCode class=&quot;java.lang.Integer&quot; _list_=&quot;false&quot;>&lt;/returnCode>&lt;returnString class=&quot;java.lang.String&quot; _list_=&quot;false&quot;>&lt;/returnString>&lt;outputXML class=&quot;workflow.types.XML&quot; _list_=&quot;false&quot;>&lt;/outputXML>&lt;/outputs>" revision="$Revision: 1.2 $" tags="" uniqueGuid="4d245579-3fb3-4136-a72f-d07662866b33" variables="&lt;variables>&lt;ClientName class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;outputXML class=&quot;java.lang.String&quot; _list_=&quot;false&quot; />&lt;/variables>" webHidden="0">
    <schema>
        <outputs className="" name="outputs" type="">
            <children attribute="0" className="java.lang.Integer" defaultValue="" hidden="0" inputType="java.lang.Integer" listType="0" name="returnCode" type="{http://www.w3.org/2001/XMLSchema}integer"/>
            <children attribute="0" className="java.lang.String" defaultValue="" hidden="0" inputType="java.lang.String" listType="0" name="returnString" type="{http://www.w3.org/2001/XMLSchema}string"/>
            <children attribute="0" className="workflow.types.XML" defaultValue="" hidden="0" inputType="workflow.types.XML" listType="0" name="outputXML" type="{workflow.types}XML"/>
        </outputs>
        <variables attribute="0" className="" name="variables" type="">
            <children attribute="0" className="java.lang.String" controlType="0" defaultValue="" displayName="" documentation="" hidden="0" inputType="java.lang.String" listType="0" name="ClientName" readOnly="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
            <children attribute="0" className="java.lang.String" controlType="0" defaultValue="" hidden="0" inputType="java.lang.String" listType="0" name="outputXML" type="{http://www.w3.org/2001/XMLSchema}string"/>
        </variables>
        <inputs className="" name="inputs" type="">
            <children attribute="0" className="workflow.types.XML" defaultValue="" hidden="0" inputType="workflow.types.XML" listType="0" name="requestXML" type="{workflow.types}XML"/>
            <children attribute="0" className="workflow.types.XML" defaultValue="" displayName="" hidden="0" inputType="workflow.types.XML" listType="0" name="processingInstruction" type="{workflow.types}XML"/>
            <children attribute="0" className="workflow.types.XML" defaultValue="" hidden="0" inputType="workflow.types.XML" listType="0" name="responseXML" type="{workflow.types}XML"/>
        </inputs>
        <config attribute="0" className="" name="configuration" type="">
            <children attribute="0" className="java.lang.String" controlType="0" defaultValue="" displayName="" documentation="" hidden="0" inputType="java.lang.String" listType="0" name="CustomString" readOnly="0" type="{http://www.w3.org/2001/XMLSchema}string"/>
        </config>
    </schema>
    <Start breakpoint="0" commented="0" continueOnFailure="0" created="0" description="" displayName="Start" height="36" interactive="0" jobMode="0" name="Start" originalStyle="" skipAttempt="0" style="image;image=/images/jgraphx/house.png" uniqueName="Start_1" waitSetting="0" width="58" x="45" y="41">
        <inputs val="&lt;inputs />"/>
        <transition activity="Script_2" commented="0" originalStyle="" points="" sourceX="72" sourceY="59" status="0" style="defaultEdge" targetX="381" targetY="90" transitionIndex="0" x="0" y="0">
            <condition language="1" script="/*&#xa;The expression should return a boolean. Use the variable name &quot;activity&quot; to refer to the previous activity object. Example:&#xa;activity.exitCode==0;&#xa;*/&#xa;"/>
        </transition>
    </Start>
    <Activity breakpoint="0" commented="0" continueOnFailure="0" created="1585746845604" description="activity to execute code snippets in the selected language" displayName="Script" height="34" interactive="0" jobMode="0" name="Script" namespaceUri="commvault.cte.workflow.activities" originalStyle="" skipAttempt="0" style="label;image=commvault.cte.workflow.activities.ScriptActivity" uniqueName="Script_2" waitSetting="0" width="100" x="166" y="140">
        <inputs val="&lt;inputs>&lt;script language=&quot;1&quot; script=&quot;String newClientName = &amp;quot;&amp;quot;;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;String custom_string = xpath:{/workflow/configuration/CustomString};&amp;#xD;&amp;#xA;newClientName = newClientName + custom_string;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;workflow.setVariable(&amp;quot;ClientName&amp;quot;, newClientName);&amp;#xD;&amp;#xA;logger.info(&amp;quot;Client name after modification is: &amp;quot; + newClientName);&amp;#xD;&amp;#xA;&quot; />&lt;/inputs>"/>
        <transition activity="Script_3" commented="0" originalStyle="" points="" sourceX="216" sourceY="157" status="0" style="defaultEdge" targetX="416" targetY="138" transitionIndex="0" x="0" y="0">
            <condition script="/*&#xa;The expression should return a boolean. Use the variable name &quot;activity&quot; to refer to the previous activity object. Example:&#xa;activity.exitCode==0;&#xa;*/&#xa;"/>
        </transition>
    </Activity>
    <Activity breakpoint="0" commented="0" continueOnFailure="0" created="1585749589977" description="activity to execute code snippets in the selected language" displayName="Script" height="34" interactive="0" jobMode="0" name="Script" namespaceUri="commvault.cte.workflow.activities" originalStyle="" skipAttempt="0" style="label;image=commvault.cte.workflow.activities.ScriptActivity" uniqueName="Script_3" waitSetting="0" width="100" x="366" y="121">
        <inputs val="&lt;inputs>&lt;script language=&quot;1&quot; script=&quot;import javax.xml.parsers.DocumentBuilder;&amp;#xD;&amp;#xA;import javax.xml.parsers.DocumentBuilderFactory;&amp;#xD;&amp;#xA;import javax.xml.transform.Transformer;&amp;#xD;&amp;#xA;import javax.xml.transform.TransformerFactory;&amp;#xD;&amp;#xA;import javax.xml.transform.dom.DOMSource;&amp;#xD;&amp;#xA;import javax.xml.transform.stream.StreamResult;&amp;#xD;&amp;#xA;import java.io.StringReader;&amp;#xD;&amp;#xA;import java.io.StringWriter;&amp;#xD;&amp;#xA;import org.w3c.dom.Document;&amp;#xD;&amp;#xA;import org.w3c.dom.Element;&amp;#xD;&amp;#xA;import org.w3c.dom.Node;&amp;#xD;&amp;#xA;import org.w3c.dom.NodeList;&amp;#xD;&amp;#xA;import org.xml.sax.InputSource;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();&amp;#xD;&amp;#xA;String ClientName = xpath:{/workflow/variables/ClientName} + &amp;quot;&amp;quot;;&amp;#xD;&amp;#xA;XML inXML = xpath:{/workflow/inputs/requestXML};&amp;#xD;&amp;#xA;XML reqXML = inXML.selectSingleNode(&amp;quot;/requestXML/*&amp;quot;);&amp;#xD;&amp;#xA;String xml = reqXML.toString() + &amp;quot;&amp;quot;;&amp;#xD;&amp;#xA;xml = xml.trim();&amp;#xD;&amp;#xA;logger.info(&amp;quot;************************************ Commcell Original XML ***********************************&amp;quot;);&amp;#xD;&amp;#xA;logger.info(xml);&amp;#xD;&amp;#xA;DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;InputSource is = new InputSource();&amp;#xD;&amp;#xA;is.setCharacterStream(new StringReader(xml));&amp;#xD;&amp;#xA;Document doc = dBuilder.parse(is);&amp;#xD;&amp;#xA;doc.getDocumentElement().normalize();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;NodeList nodes = doc.getElementsByTagName(&amp;quot;clientEntity&amp;quot;);&amp;#xD;&amp;#xA;Node node = nodes.item(0);&amp;#xD;&amp;#xA;Element element = (Element) node;&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;element.setAttribute(&amp;quot;clientName&amp;quot;, ClientName);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;TransformerFactory transformerFactory = TransformerFactory.newInstance();&amp;#xD;&amp;#xA;Transformer transformer = transformerFactory.newTransformer();&amp;#xD;&amp;#xA;DOMSource domSource = new DOMSource(doc);&amp;#xD;&amp;#xA;StringWriter out = new StringWriter();&amp;#xD;&amp;#xA;StreamResult streamResult = new StreamResult(out);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;transformer.transform(domSource, streamResult);&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;output = out.toString();&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;logger.info(&amp;quot;************************************ Commcell Modified XML ***********************************&amp;quot;);&amp;#xD;&amp;#xA;logger.info(output + &amp;quot;&amp;quot;);&amp;#xD;&amp;#xA;workflow.setVariable(&amp;quot;outputXML&amp;quot;, output);&quot; />&lt;/inputs>"/>
        <transition activity="AssignValues_1" commented="0" originalStyle="" points="" sourceX="416" sourceY="138" status="0" style="defaultEdge" targetX="606" targetY="213" transitionIndex="0" x="0" y="0">
            <condition script="/*&#xa;The expression should return a boolean. Use the variable name &quot;activity&quot; to refer to the previous activity object. Example:&#xa;activity.exitCode==0;&#xa;*/&#xa;"/>
        </transition>
    </Activity>
    <Activity breakpoint="0" commented="0" continueOnFailure="0" created="1585751171406" description="Updates process variables and inputs" displayName="AssignValues" height="34" interactive="0" jobMode="0" name="AssignValues" namespaceUri="commvault.cte.workflow.activities" originalStyle="" skipAttempt="0" style="label;image=commvault.cte.workflow.activities.AssignValues" uniqueName="AssignValues_1" waitSetting="0" width="108" x="552" y="196">
        <outputs outputs="&lt;outputs>&lt;outputXML class=&quot;workflow.types.XML&quot; _list_=&quot;false&quot;>xpath:{/workflow/variables/outputXML}&lt;/outputXML>&lt;/outputs>"/>
        <inputs val="&lt;inputs />"/>
    </Activity>
</Workflow_WorkflowDefinition>
